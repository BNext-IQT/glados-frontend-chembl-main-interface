describe "Utils", ->

  describe "Round numbers", ->

    testRoundNumbersForFactor = (factor, numbersMustBe) ->
      console.log 'Round Examples factor: ' + factor

      cur_i = -500
      last_up_v = null
      last_down_v = null
      while cur_i <= 500
        up_v = glados.Utils.roundNumber(cur_i, false, false)
        down_v = glados.Utils.roundNumber(cur_i, false, true)

        id = JSON.stringify(cur_i/factor)
        valuesGot = numbersMustBe[id]

        if up_v == down_v and (up_v != last_up_v or down_v != last_down_v)
          expect(valuesGot[0]).toBe(up_v)
        else if up_v != down_v and (up_v != last_up_v or down_v != last_down_v)
          expect(valuesGot[0]).toBe(up_v)
          expect(valuesGot[1]).toBe(down_v)
        last_up_v = up_v
        last_down_v = down_v
        cur_i++

    it 'rounds the numbers for factor 1', ->

      rangesMustBe = {"0":[0],"1":[1,0],"2":[2],"3":[5,2],"5":[5],"6":[10,5],"10":[10],"11":[20,10],"20":[20],"21":[50,20],"50":[50],"51":[100,50],"100":[100],"101":[200,100],"200":[200],"201":[500,200],"500":[500],"-500":[-500],"-200":[-200],"-100":[-100],"-50":[-50],"-20":[-20],"-10":[-10],"-5":[-5],"-2":[-2],"-1":[-1]}
      testRoundNumbersForFactor(1, rangesMustBe)
      rangesMustBe = {"0":[0],"1":[100],"2":[200],"5":[500],"-5":[-500],"-2":[-200],"-1":[-100],"-0.5":[-50],"-0.2":[-20],"-0.1":[-10],"-0.05":[-5],"-0.02":[-2],"-0.01":[-1],"0.01":[1,0],"0.02":[2],"0.03":[5,2],"0.05":[5],"0.06":[10,5],"0.1":[10],"0.11":[20,10],"0.2":[20],"0.21":[50,20],"0.5":[50],"0.51":[100,50],"1.01":[200,100],"2.01":[500,200]}
      testRoundNumbersForFactor(100.0, rangesMustBe)
      rangesMustBe = {"0":[0],"-0.05":[-500],"-0.02":[-200],"-0.01":[-100],"-0.005":[-50],"-0.002":[-20],"-0.001":[-10],"-0.0005":[-5],"-0.0002":[-2],"-0.0001":[-1],"0.0001":[1,0],"0.0002":[2],"0.0003":[5,2],"0.0005":[5],"0.0006":[10,5],"0.001":[10],"0.0011":[20,10],"0.002":[20],"0.0021":[50,20],"0.005":[50],"0.0051":[100,50],"0.01":[100],"0.0101":[200,100],"0.02":[200],"0.0201":[500,200],"0.05":[500]}
      testRoundNumbersForFactor(10000.0, rangesMustBe)

  it 'converts radians to degrees', ->

    expect(glados.Utils.getDegreesFromRadians(Math.PI)).toBe(180)
    expect(glados.Utils.getDegreesFromRadians(Math.PI/2)).toBe(90)

  describe "Nested values", ->

    describe "When all data is available", ->

      testObj = {}
      beforeAll (done) ->

        $.getJSON(glados.Settings.STATIC_URL + 'testData/CHEMBL25Attributes.json').done (testData) ->
          testObj = testData
          done()

      it 'Retrieves a nested value from an object', ->

        expect(glados.Utils.getNestedValue(testObj, 'availability_type')).toBe('2')
        expect(glados.Utils.getNestedValue(testObj, 'biotherapeutic')).toBe(glados.Settings.DEFAULT_NULL_VALUE_LABEL)
        expect(glados.Utils.getNestedValue(testObj, 'molecule_properties.acd_logd')).toBe('-1.68')

    describe "When some parent items are null", ->

      testObj = {}
      beforeAll (done) ->

        $.getJSON(glados.Settings.STATIC_URL + 'testData/CHEMBL2107978Attributes.json').done (testData) ->
          testObj = testData
          done()

      it 'Retrieves a nested value from an object', ->

        expect(glados.Utils.getNestedValue(testObj, 'molecule_properties')).toBe(glados.Settings.DEFAULT_NULL_VALUE_LABEL)
        expect(glados.Utils.getNestedValue(testObj, 'molecule_properties.acd_logd')).toBe(glados.Settings.DEFAULT_NULL_VALUE_LABEL)

      it 'Return nulls instead of null value label when requested', ->

        valueGot = glados.Utils.getNestedValue(testObj, 'molecule_properties', forceAsNumber=false,
          customNullValueLabel=undefined, returnUndefined=true)
        expect(valueGot).toBe(undefined)

        valueGot = glados.Utils.getNestedValue(testObj, 'molecule_properties.acd_logd', forceAsNumber=false,
          customNullValueLabel=undefined, returnUndefined=true)
        expect(valueGot).toBe(undefined)

  describe "Columns and values", ->

    testCompound = new Compound
    beforeAll (done) ->

      $.getJSON(glados.Settings.STATIC_URL + 'testData/CHEMBL25Attributes.json').done (testData) ->
        testCompound.set(testCompound.parse(testData))
        done()

    it 'generates columns and values for chembl25', ->

      columns = Compound.COLUMNS_SETTINGS.TEST
      [colsWithVals, highlights] = glados.Utils.getColumnsWithValuesAndHighlights(columns, testCompound)

      for col in colsWithVals
        expect(col.value?).toBe(true)

      expect(colsWithVals[0].has_link).toBe(true)
      expect(colsWithVals[0].img_url).toBe("https://www.ebi.ac.uk/chembl/api/data/image/CHEMBL25.svg?engine=indigo")
      expect(colsWithVals[0].link_url).toBe("/compound_report_card/CHEMBL25")
      expect(colsWithVals[0].name_to_show).toBe("ChEMBL ID")
      expect(colsWithVals[0].value).toBe("CHEMBL25")

      expect(colsWithVals[1].has_link).toBe(false)
      expect(colsWithVals[1].name_to_show).toBe("Name")
      expect(colsWithVals[1].value).toBe("ASPIRIN")

      expect(colsWithVals[2].has_link).toBe(false)
      expect(colsWithVals[2].name_to_show).toBe("Max Phase")
      expect(colsWithVals[2].value).toBe(4)

    it 'obtains img url for chembl25', ->

      columns = Compound.COLUMNS_SETTINGS.RESULTS_LIST_REPORT_CARD
      [colsWithVals, highlights] = glados.Utils.getColumnsWithValuesAndHighlights(columns, testCompound)

      expect(glados.Utils.getImgURL(colsWithVals)).toBe("https://www.ebi.ac.uk/chembl/api/data/image/CHEMBL25.svg?engine=indigo")

  describe "Buckets", ->

    generateRandomBuckets = (numBuckets) ->

      buckets = []
      for i in [1..numBuckets]
        buckets.push
          key: 'bucket' + i
          doc_count: parseInt(Math.random() * 1000)

      return buckets

    generateBucketsWithSubBuckets = (numBuckets, numSumBuckets, subBucketsAggName) ->

      buckets = []
      for i in [1..numBuckets]

        newBucket =
          key: 'bucket' + i
          doc_count: 1

        newBucket[subBucketsAggName] = {}
        newBucket[subBucketsAggName].buckets = []
        subBucketsContainer = newBucket[subBucketsAggName].buckets

        for j in [1..numSumBuckets]

          subBucket =
            key: "bucket-#{j}"
            doc_count: j

          subBucketsContainer.push subBucket

        buckets.push newBucket

      return buckets


    it 'gets sub buckets correctly', ->

      subBucketsAggName = 'split_series_agg'

      testBucketsWithSubBuckets = generateBucketsWithSubBuckets(2, 20, subBucketsAggName)
      newBucketsWithSubBuckets =  glados.Utils.Buckets.getSubBucketsOrder(testBucketsWithSubBuckets, subBucketsAggName)

      newBucketsWithSubBucketsList = _.sortBy( _.values(newBucketsWithSubBuckets), (item) -> item.pos )

      currentCount = Number.MAX_VALUE

      for bucket in newBucketsWithSubBucketsList
        bucketCount = bucket.count
        expect(bucketCount <= currentCount ).toBe(true)
        currentCount = bucketCount

    it 'merges buckets with from a maximum number of categories', ->

      numBuckets = 10
      padding = 5

      # for now it is not necessary that it works with maxbuckets = 1
      for maxBuckets in [2..numBuckets+padding]
        testBuckets = generateRandomBuckets(numBuckets)
        newBuckets = glados.Utils.Buckets.mergeBuckets(testBuckets, maxBuckets)

        totalCountMustBe = _.reduce(_.pluck(testBuckets, 'doc_count'), ((a, b) -> a + b))
        totalCountGot = _.reduce(_.pluck(newBuckets, 'doc_count'), ((a, b) -> a + b))
        expect(totalCountMustBe).toBe(totalCountGot)

        totalBucketsGot = newBuckets.length
        expect(totalBucketsGot <= maxBuckets).toBe(true)

  describe "Query Strings", ->

    it 'generates a querystring for a list of compound chembl ids', ->

      idAttribute = 'molecule_chembl_id'

      chemblIDs = ["CHEMBL277500", "CHEMBL1332267", "CHEMBL1449337", "CHEMBL1531487", "CHEMBL1741626", "CHEMBL1881764", "CHEMBL1893751", "CHEMBL1966526", "CHEMBL1995935", "CHEMBL2003799", "CHEMBL2132226", "CHEMBL3833355", "CHEMBL3833360", "CHEMBL3833364"]
      qs = glados.Utils.QueryStrings.getQueryStringForItemsList(chemblIDs, idAttribute)

      listGot = qs.replace(idAttribute + ':(', '').replace(')', '').replace(/"/g, '').split(' OR ')

      for i in [0..listGot.length-1]
        expect(listGot[i]).toBe(chemblIDs[i])

  describe "Columns Parsing", ->

    describe 'with link function', ->

      testCol =
        name_to_show: 'UniProt Accession'
        comparator: 'target_components'
        sort_disabled: false
        is_sorting: 0
        sort_class: 'fa-sort'
        parse_function: (components) -> (comp.accession for comp in components).join(', ')
        link_function: (components) ->
          'http://www.uniprot.org/uniprot/?query=' + ('accession:' + comp.accession for comp in components).join('+OR+')

      testColumns = [testCol]
      testTarget = new Target()

      beforeAll (done) ->
        dataURL =  glados.Settings.STATIC_URL + 'testData/TargetCHEMBL3301393TestData.json'
        TestsUtils.simulateDataModel(testTarget, dataURL, done)

      it 'generates the correct values', ->

        [columnsWithValuesGot, highlights] = glados.Utils.getColumnsWithValuesAndHighlights(testColumns, testTarget)
        expect(columnsWithValuesGot[0].value).toBe('P61794, Q8K5E0')
        expect(columnsWithValuesGot[0].link_url).toBe('http://www.uniprot.org/uniprot/?query=accession:P61794+OR+accession:Q8K5E0')

  describe "Fetching Utils", ->

    it 'fetches a model only once', ->

      testTarget = new Target
        target_chembl_id: 'CHEMBL2111359'

      spyOn(testTarget, 'fetch')
      glados.Utils.Fetching.fetchModelOnce(testTarget)
      glados.Utils.Fetching.fetchModelOnce(testTarget)
      glados.Utils.Fetching.fetchModelOnce(testTarget)
      expect(testTarget.fetch).toHaveBeenCalledTimes(1)

   describe "URL shortening", ->

     it 'identifies that an url needs to be shortened', ->

       testURL = undefined
       expect(glados.Utils.URLS.URLNeedsShortening(testURL)).toBe(false)

       testURL = ''
       expect(glados.Utils.URLS.URLNeedsShortening(testURL)).toBe(false)

       testURL = 'Do you think that\'s air you\'re breathing now?\n'
       expect(glados.Utils.URLS.URLNeedsShortening(testURL)).toBe(false)

       testURL = '/g/#browse/documents/filter/year%3A2000%20AND%20journal%3A(%22J.%20Med.%20Chem.%22)'
       expect(glados.Utils.URLS.URLNeedsShortening(testURL)).toBe(false)

       testURL = Array(glados.Settings.MAX_GENERATED_URL_LENGTH + 1).join('x')
       expect(glados.Utils.URLS.URLNeedsShortening(testURL)).toBe(false)

       testURL = Array(glados.Settings.MAX_GENERATED_URL_LENGTH + 2).join('x')
       expect(glados.Utils.URLS.URLNeedsShortening(testURL)).toBe(false)

       testURL = '/g/#browse/activities/filter/molecule_chembl_id%3A(%22CHEMBL59%22%20OR%20%22CHEMBL1557%22%20OR%20%22CHEMBL531%22%20OR%20%22CHEMBL301265%22%20OR%20%22CHEMBL1201087%22%20OR%20%22CHEMBL589%22%20OR%20%22CHEMBL1303%22%20OR%20%22CHEMBL1371770%22%20OR%20%22CHEMBL1009%22%20OR%20%22CHEMBL493%22%20OR%20%22CHEMBL718%22%20OR%20%22CHEMBL588%22%20OR%20%22CHEMBL1200748%22%20OR%20%22CHEMBL53%22%20OR%20%22CHEMBL1201236%22%20OR%20%22CHEMBL2103827%22%20OR%20%22CHEMBL459%22%20OR%20%22CHEMBL273575%22%20OR%20%22CHEMBL1256842%22%20OR%20%22CHEMBL3039565%22%20OR%20%22CHEMBL1201728%22%20OR%20%22CHEMBL1201066%22%20OR%20%22CHEMBL1118%22%20OR%20%22CHEMBL637%22%20OR%20%22CHEMBL708%22%20OR%20%22CHEMBL1200997%22%20OR%20%22CHEMBL1615372%22%20OR%20%22CHEMBL1237021%22%20OR%20%22CHEMBL1712%22%20OR%20%22CHEMBL1201342%22%20OR%20%22CHEMBL6437%22%20OR%20%22CHEMBL3187365%22%20OR%20%22CHEMBL54%22%20OR%20%22CHEMBL328190%22%20OR%20%22CHEMBL848%22%20OR%20%22CHEMBL516%22%20OR%20%22CHEMBL887%22%20OR%20%22CHEMBL781%22%20OR%20%22CHEMBL395110%22%20OR%20%22CHEMBL567%22%20OR%20%22CHEMBL42%22%20OR%20%22CHEMBL760%22%20OR%20%22CHEMBL1112%22%20OR%20%22CHEMBL1729%22%20OR%20%22CHEMBL1378%22%20OR%20%22CHEMBL304902%22%20OR%20%22CHEMBL1201328%22%20OR%20%22CHEMBL716%22%20OR%20%22CHEMBL278398%22%20OR%20%22CHEMBL728%22%20OR%20%22CHEMBL715%22%20OR%20%22CHEMBL87708%22%20OR%20%22CHEMBL422%22%20OR%20%22CHEMBL2105760%22%20OR%20%22CHEMBL726%22%20OR%20%22CHEMBL2106915%22%20OR%20%22CHEMBL15023%22%20OR%20%22CHEMBL1085%22%20OR%20%22CHEMBL946%22%20OR%20%22CHEMBL833%22%20OR%20%22CHEMBL1909072%22%20OR%20%22CHEMBL49%22%20OR%20%22CHEMBL1697766%22%20OR%20%22CHEMBL621%22%20OR%20%22CHEMBL251940%22%20OR%20%22CHEMBL1201747%22%20OR%20%22CHEMBL1200959%22%20OR%20%22CHEMBL623%22%20OR%20%22CHEMBL415%22%20OR%20%22CHEMBL11%22%20OR%20%22CHEMBL831%22%20OR%20%22CHEMBL72%22%20OR%20%22CHEMBL1697851%22%20OR%20%22CHEMBL462605%22%20OR%20%22CHEMBL468%22%20OR%20%22CHEMBL28218%22%20OR%20%22CHEMBL46399%22%20OR%20%22CHEMBL71%22%20OR%20%22CHEMBL654%22%20OR%20%22CHEMBL534%22%20OR%20%22CHEMBL1201216%22%20OR%20%22CHEMBL2107011%22%20OR%20%22CHEMBL3275586%22%20OR%20%22CHEMBL465026%22%20OR%20%22CHEMBL1106%22%20OR%20%22CHEMBL592%22%20OR%20%22CHEMBL43452%22%20OR%20%22CHEMBL1614644%22%20OR%20%22CHEMBL439849%22%20OR%20%22CHEMBL1200986%22%20OR%20%22CHEMBL1201758%22%20OR%20%22CHEMBL1492%22%20OR%20%22CHEMBL1584%22%20OR%20%22CHEMBL1615350%22%20OR%20%22CHEMBL1625607%22%20OR%20%22CHEMBL896%22%20OR%20%22CHEMBL841%22%20OR%20%22CHEMBL52440%22%20OR%20%22CHEMBL376359%22%20OR%20%22CHEMBL1113%22%20OR%20%22CHEMBL549%22%20OR%20%22CHEMBL1508%22%20OR%20%22CHEMBL2105458%22%20OR%20%22CHEMBL1626%22%20OR%20%22CHEMBL1078261%22%20OR%20%22CHEMBL46516%22%20OR%20%22CHEMBL2028019%22%20OR%20%22CHEMBL1198%22%20OR%20%22CHEMBL1000%22%20OR%20%22CHEMBL303933%22%20OR%20%22CHEMBL570%22%20OR%20%22CHEMBL1172%22%20OR%20%22CHEMBL1200714%22%20OR%20%22CHEMBL1200854%22%20OR%20%22CHEMBL797%22%20OR%20%22CHEMBL471737%22%20OR%20%22CHEMBL297302%22%20OR%20%22CHEMBL1201191%22%20OR%20%22CHEMBL117287%22%20OR%20%22CHEMBL19019%22%20OR%20%22CHEMBL1108%22%20OR%20%22CHEMBL564%22%20OR%20%22CHEMBL1200951%22%20OR%20%22CHEMBL86304%22%20OR%20%22CHEMBL157138%22%20OR%20%22CHEMBL231068%22%20OR%20%22CHEMBL92870%22%20OR%20%22CHEMBL360328%22%20OR%20%22CHEMBL1266%22%20OR%20%22CHEMBL203266%22%20OR%20%22CHEMBL1295%22%20OR%20%22CHEMBL479%22%20OR%20%22CHEMBL12713%22%20OR%20%22CHEMBL314437%22%20OR%20%22CHEMBL1623%22%20OR%20%22CHEMBL30008%22%20OR%20%22CHEMBL1189679%22%20OR%20%22CHEMBL1201203%22%20OR%20%22CHEMBL502%22%20OR%20%22CHEMBL1254682%22%20OR%20%22CHEMBL1201%22%20OR%20%22CHEMBL864%22%20OR%20%22CHEMBL277474%22%20OR%20%22CHEMBL3707371%22%20OR%20%22CHEMBL1088%22%20OR%20%22CHEMBL117785%22%20OR%20%22CHEMBL1423%22%20OR%20%22CHEMBL1201217%22%20OR%20%22CHEMBL1201347%22%20OR%20%22CHEMBL445%22%20OR%20%22CHEMBL629%22%20OR%20%22CHEMBL982%22%20OR%20%22CHEMBL809%22%20OR%20%22CHEMBL325109%22%20OR%20%22CHEMBL1457%22%20OR%20%22CHEMBL1201349%22%20OR%20%22CHEMBL1201271%22%20OR%20%22CHEMBL648%22%20OR%20%22CHEMBL594%22%20OR%20%22CHEMBL15245%22%20OR%20%22CHEMBL668%22%20OR%20%22CHEMBL1201356%22%20OR%20%22CHEMBL656%22%20OR%20%22CHEMBL28333%22%20OR%20%22CHEMBL2111030%22%20OR%20%22CHEMBL1754%22%20OR%20%22CHEMBL524004%22%20OR%20%22CHEMBL193482%22%20OR%20%22CHEMBL691%22%20OR%20%22CHEMBL1442422%22%20OR%20%22CHEMBL1200973%22%20OR%20%22CHEMBL70418%22%20OR%20%22CHEMBL14376%22%20OR%20%22CHEMBL21731%22%20OR%20%22CHEMBL22108%22%20OR%20%22CHEMBL288470%22%20OR%20%22CHEMBL398707%22%20OR%20%22CHEMBL963%22%20OR%20%22CHEMBL70%22%20OR%20%22CHEMBL296419%22%20OR%20%22CHEMBL315985%22%20OR%20%22CHEMBL3707301%22%20OR%20%22CHEMBL9967%22%20OR%20%22CHEMBL279516%22%20OR%20%22CHEMBL1734%22%20OR%20%22CHEMBL15891%22%20OR%20%22CHEMBL219916%22%20OR%20%22CHEMBL46469%22%20OR%20%22CHEMBL135%22%20OR%20%22CHEMBL1908311%22%20OR%20%22CHEMBL1201250%22%20OR%20%22CHEMBL1450%22%20OR%20%22CHEMBL2111135%22%20OR%20%22CHEMBL2105581%22%20OR%20%22CHEMBL1201208%22%20OR%20%22CHEMBL1186579%22%20OR%20%22CHEMBL976%22%20OR%20%22CHEMBL85%22%20OR%20%22CHEMBL1742423%22%20OR%20%22CHEMBL24924%22%20OR%20%22CHEMBL3%22%20OR%20%22CHEMBL1201245%22%20OR%20%22CHEMBL77622%22%20OR%20%22CHEMBL33986%22%20OR%20%22CHEMBL19215%22%20OR%20%22CHEMBL1744%22%20OR%20%22CHEMBL596%22%20OR%20%22CHEMBL1101%22%20OR%20%22CHEMBL2110569%22%20OR%20%22CHEMBL908%22%20OR%20%22CHEMBL13828%22%20OR%20%22CHEMBL1738797%22%20OR%20%22CHEMBL485%22%20OR%20%22CHEMBL659%22%20OR%20%22CHEMBL242338%22%20OR%20%22CHEMBL43064%22%20OR%20%22CHEMBL1324%22%20OR%20%22CHEMBL1201151%22%20OR%20%22CHEMBL936%22%20OR%20%22CHEMBL1275%22%20OR%20%22CHEMBL765%22%20OR%20%22CHEMBL418995%22%20OR%20%22CHEMBL657%22%20OR%20%22CHEMBL51%22%20OR%20%22CHEMBL1405%22%20OR%20%22CHEMBL1138%22%20OR%20%22CHEMBL46740%22%20OR%20%22CHEMBL1263%22%20OR%20%22CHEMBL1068%22%20OR%20%22CHEMBL953%22%20OR%20%22CHEMBL1595%22%20OR%20%22CHEMBL285802%22%20OR%20%22CHEMBL511142%22%20OR%20%22CHEMBL364713%22%20OR%20%22CHEMBL87992%22%20OR%20%22CHEMBL2104445%22%20OR%20%22CHEMBL1026%22%20OR%20%22CHEMBL119443%22%20OR%20%22CHEMBL86%22%20OR%20%22CHEMBL22242%22%20OR%20%22CHEMBL1075%22%20OR%20%22CHEMBL1160160%22%20OR%20%22CHEMBL849%22%20OR%20%22CHEMBL1183717%22%20OR%20%22CHEMBL779%22%20OR%20%22CHEMBL17157%22%20OR%20%22CHEMBL1511%22%20OR%20%22CHEMBL253376%22%20OR%20%22CHEMBL1065%22%20OR%20%22CHEMBL169901%22%20OR%20%22CHEMBL81%22%20OR%20%22CHEMBL3707367%22%20OR%20%22CHEMBL1024%22%20OR%20%22CHEMBL1404%22%20OR%20%22CHEMBL1619528%22%20OR%20%22CHEMBL1097630%22%20OR%20%22CHEMBL35228%22%20OR%20%22CHEMBL1743263%22%20OR%20%22CHEMBL1201165%22%20OR%20%22CHEMBL496%22%20OR%20%22CHEMBL1425%22%20OR%20%22CHEMBL451%22%20OR%20%22CHEMBL3184437%22%20OR%20%22CHEMBL18442%22%20OR%20%22CHEMBL1198857%22%20OR%20%22CHEMBL644%22%20OR%20%22CHEMBL86882%22%20OR%20%22CHEMBL1492500%22%20OR%20%22CHEMBL673%22%20OR%20%22CHEMBL1670%22%20OR%20%22CHEMBL660%22%20OR%20%22CHEMBL658%22%20OR%20%22CHEMBL119423%22%20OR%20%22CHEMBL1480%22%20OR%20%22CHEMBL243712%22%20OR%20%22CHEMBL80%22%20OR%20%22CHEMBL679%22%20OR%20%22CHEMBL969%22%20OR%20%22CHEMBL26%22%20OR%20%22CHEMBL2105224%22%20OR%20%22CHEMBL306700%22%20OR%20%22CHEMBL396778%22%20OR%20%22CHEMBL290106%22%20OR%20%22CHEMBL1200515%22%20OR%20%22CHEMBL1201212%22%20OR%20%22CHEMBL2111112%22%20OR%20%22CHEMBL1278%22%20OR%20%22CHEMBL998%22%20OR%20%22CHEMBL1628227%22%20OR%20%22CHEMBL288441%22%20OR%20%22CHEMBL2105395%22%20OR%20%22CHEMBL640%22%20OR%20%22CHEMBL972%22%20OR%20%22CHEMBL1437%22%20OR%20%22CHEMBL524%22%20OR%20%22CHEMBL1201319%22%20OR%20%22CHEMBL1909286%22%20OR%20%22CHEMBL639%22%20OR%20%22CHEMBL1561%22%20OR%20%22CHEMBL1200370%22%20OR%20%22CHEMBL1200370%22%20OR%20%22CHEMBL370805%22%20OR%20%22CHEMBL1561%22%20OR%20%22CHEMBL895%22%20OR%20%22CHEMBL1271%22%20OR%20%22CHEMBL799%22%20OR%20%22CHEMBL807%22%20OR%20%22CHEMBL412873%22%20OR%20%22CHEMBL188952%22%20OR%20%22CHEMBL697%22%20OR%20%22CHEMBL814%22%20OR%20%22CHEMBL254857%22%20OR%20%22CHEMBL1201251%22%20OR%20%22CHEMBL1201234%22%20OR%20%22CHEMBL926%22%20OR%20%22CHEMBL473%22%20OR%20%22CHEMBL1206%22%20OR%20%22CHEMBL461522%22%20OR%20%22CHEMBL583%22%20OR%20%22CHEMBL107%22%20OR%20%22CHEMBL1510%22%20OR%20%22CHEMBL24778%22%20OR%20%22CHEMBL94454%22%20OR%20%22CHEMBL2107004%22%20OR%20%22CHEMBL1237044%22%20OR%20%22CHEMBL126224%22%20OR%20%22CHEMBL2111101%22%20OR%20%22CHEMBL223228%22%20OR%20%22CHEMBL505%22%20OR%20%22CHEMBL711%22%20OR%20%22CHEMBL1350%22%20OR%20%22CHEMBL1493%22%20OR%20%22CHEMBL914%22%20OR%20%22CHEMBL1201353%22%20OR%20%22CHEMBL1201269%22%20OR%20%22CHEMBL264374%22%20OR%20%22CHEMBL1256391%22%20OR%20%22CHEMBL305187%22%20OR%20%22CHEMBL346977%22%20OR%20%22CHEMBL1764%22%20OR%20%22CHEMBL83%22%20OR%20%22CHEMBL1697737%22%20OR%20%22CHEMBL311498%22%20OR%20%22CHEMBL22097%22%20OR%20%22CHEMBL723%22%20OR%20%22CHEMBL465%22%20OR%20%22CHEMBL1290%22%20OR%20%22CHEMBL1738%22%20OR%20%22CHEMBL444186%22%20OR%20%22CHEMBL3833412%22%20OR%20%22CHEMBL1029%22%20OR%20%22CHEMBL434394%22%20OR%20%22CHEMBL53418%22%20OR%20%22CHEMBL3833382%22%20OR%20%22CHEMBL1346%22%20OR%20%22CHEMBL267648%22%20OR%20%22CHEMBL750%22%20OR%20%22CHEMBL505851%22%20OR%20%22CHEMBL1685%22%20OR%20%22CHEMBL460%22%20OR%20%22CHEMBL463%22%20OR%20%22CHEMBL855%22%20OR%20%22CHEMBL1681%22%20OR%20%22CHEMBL2104993%22%20OR%20%22CHEMBL315838%22%20OR%20%22CHEMBL443605%22%20OR%20%22CHEMBL1086%22%20OR%20%22CHEMBL707%22%20OR%20%22CHEMBL1874750%22%20OR%20%22CHEMBL1201256%22%20OR%20%22CHEMBL2110774%22%20OR%20%22CHEMBL684%22%20OR%20%22CHEMBL652%22%20OR%20%22CHEMBL562%22%20OR%20%22CHEMBL2110990%22%20OR%20%22CHEMBL12%22%20OR%20%22CHEMBL276520%22%20OR%20%22CHEMBL6966%22%20OR%20%22CHEMBL1228%22%20OR%20%22CHEMBL490%22%20OR%20%22CHEMBL3707205%22%20OR%20%22CHEMBL900%22%20OR%20%22CHEMBL61006%22%20OR%20%22CHEMBL2110926%22%20OR%20%22CHEMBL16476%22%20OR%20%22CHEMBL1027%22%20OR%20%22CHEMBL1201308%22%20OR%20%22CHEMBL827%22%20OR%20%22CHEMBL607%22%20OR%20%22CHEMBL1618018%22%20OR%20%22CHEMBL796%22%20OR%20%22CHEMBL14370%22%20OR%20%22CHEMBL1276308%22%20OR%20%22CHEMBL2105527%22%20OR%20%22CHEMBL2103774%22%20OR%20%22CHEMBL2368925%22%20OR%20%22CHEMBL16%22%20OR%20%22CHEMBL416956%22%20OR%20%22CHEMBL1175%22%20OR%20%22CHEMBL1201338%22%20OR%20%22CHEMBL75880%22%20OR%20%22CHEMBL641%22%20OR%20%22CHEMBL1224%22%20OR%20%22CHEMBL1771%22%20OR%20%22CHEMBL1187846%22%20OR%20%22CHEMBL56564%22%20OR%20%22CHEMBL517712%22%20OR%20%22CHEMBL41%22%20OR%20%22CHEMBL1331216%22%20OR%20%22CHEMBL669%22%20OR%20%22CHEMBL220491%22%20OR%20%22CHEMBL1490%22%20OR%20%22CHEMBL1201227%22%20OR%20%22CHEMBL398440%22%20OR%20%22CHEMBL2010507%22%20OR%20%22CHEMBL1215%22%20OR%20%22CHEMBL1615438%22%20OR%20%22CHEMBL267936%22%20OR%20%22CHEMBL99946%22%20OR%20%22CHEMBL980%22%20OR%20%22CHEMBL86715%22%20OR%20%22CHEMBL968%22%20OR%20%22CHEMBL1201325%22%20OR%20%22CHEMBL1189432%22%20OR%20%22CHEMBL259209%22%20OR%20%22CHEMBL1051%22%20OR%20%22CHEMBL1655%22%20OR%20%22CHEMBL1621%22%20OR%20%22CHEMBL3092041%22%20OR%20%22CHEMBL1262%22%20OR%20%22CHEMBL560%22%20OR%20%22CHEMBL1201264%22%20OR%20%22CHEMBL894%22%20OR%20%22CHEMBL2110633%22%20OR%20%22CHEMBL1697760%22%20OR%20%22CHEMBL1987462%22%20OR%20%22CHEMBL1257%22%20OR%20%22CHEMBL1651998%22%20OR%20%22CHEMBL447629%22%20OR%20%22CHEMBL770%22%20OR%20%22CHEMBL1396%22%20OR%20%22CHEMBL434%22%20OR%20%22CHEMBL1201295%22%20OR%20%22CHEMBL1201313%22%20OR%20%22CHEMBL2146883%22%20OR%20%22CHEMBL1201262%22%20OR%20%22CHEMBL533%22%20OR%20%22CHEMBL1201335%22%20OR%20%22CHEMBL416898%22%20OR%20%22CHEMBL761%22%20OR%20%22CHEMBL830%22%20OR%20%22CHEMBL680%22%20OR%20%22CHEMBL363295%22%20OR%20%22CHEMBL1491%22%20OR%20%22CHEMBL19236%22%20OR%20%22CHEMBL3707331%22%20OR%20%22CHEMBL429910%22%20OR%20%22CHEMBL260538%22%20OR%20%22CHEMBL1094%22%20OR%20%22CHEMBL1201192%22%20OR%20%22CHEMBL1306%22%20OR%20%22CHEMBL211456%22%20OR%20%22CHEMBL701%22%20OR%20%22CHEMBL1444%22%20OR%20%22CHEMBL2103877%22%20OR%20%22CHEMBL134%22%20OR%20%22CHEMBL1512677%22%20OR%20%22CHEMBL253371%22%20OR%20%22CHEMBL1005%22%20OR%20%22CHEMBL2218896%22%20OR%20%22CHEMBL374731%22%20OR%20%22CHEMBL190677%22%20OR%20%22CHEMBL1200934%22%20OR%20%22CHEMBL1197%22%20OR%20%22CHEMBL1623992%22%20OR%20%22CHEMBL1590%22%20OR%20%22CHEMBL17860%22%20OR%20%22CHEMBL201960%22%20OR%20%22CHEMBL1180725%22%20OR%20%22CHEMBL951%22%20OR%20%22CHEMBL15677%22%20OR%20%22CHEMBL1159717%22%20OR%20%22CHEMBL2107830%22%20OR%20%22CHEMBL1237132%22%20OR%20%22CHEMBL1525%22%20OR%20%22CHEMBL24072%22%20OR%20%22CHEMBL1419%22%20OR%20%22CHEMBL1094636%22%20OR%20%22CHEMBL1908373%22%20OR%20%22CHEMBL1305%22%20OR%20%22CHEMBL1162%22%20OR%20%22CHEMBL1628502%22%20OR%20%22CHEMBL940%22%20OR%20%22CHEMBL861%22%20OR%20%22CHEMBL1373%22%20OR%20%22CHEMBL49080%22%20OR%20%22CHEMBL2105745%22%20OR%20%22CHEMBL2103822%22%20OR%20%22CHEMBL282575%22%20OR%20%22CHEMBL190%22%20OR%20%22CHEMBL1218%22%20OR%20%22CHEMBL1098%22%20OR%20%22CHEMBL488%22%20OR%20%22CHEMBL46%22%20OR%20%22CHEMBL1077896%22%20OR%20%22CHEMBL126%22%20OR%20%22CHEMBL1095777%22%20OR%20%22CHEMBL1201193%22%20OR%20%22CHEMBL1371%22%20OR%20%22CHEMBL277100%22%20OR%20%22CHEMBL289469%22%20OR%20%22CHEMBL1110%22%20OR%20%22CHEMBL1279%22%20OR%20%22CHEMBL1471%22%20OR%20%22CHEMBL168815%22%20OR%20%22CHEMBL53292%22%20OR%20%22CHEMBL527%22%20OR%20%22CHEMBL829%22%20OR%20%22CHEMBL1596%22%20OR%20%22CHEMBL1358%22%20OR%20%22CHEMBL328560%22%20OR%20%22CHEMBL1201260%22%20OR%20%22CHEMBL75753%22%20OR%20%22CHEMBL709%22%20OR%20%22CHEMBL218490%22%20OR%20%22CHEMBL2104356%22%20OR%20%22CHEMBL229128%22%20OR%20%22CHEMBL1257015%22%20OR%20%22CHEMBL64195%22%20OR%20%22CHEMBL108%22%20OR%20%22CHEMBL3707370%22%20OR%20%22CHEMBL305906%22%20OR%20%22CHEMBL1200430%22%20OR%20%22CHEMBL436%22%20OR%20%22CHEMBL423%22%20OR%20%22CHEMBL434200%22%20OR%20%22CHEMBL24171%22%20OR%20%22CHEMBL2105420%22%20OR%20%22CHEMBL469%22%20OR%20%22CHEMBL1201274%22%20OR%20%22CHEMBL839%22%20OR%20%22CHEMBL1488%22%20OR%20%22CHEMBL575%22%20OR%20%22CHEMBL1378024%22%20OR%20%22CHEMBL101%22%20OR%20%22CHEMBL1102%22%20OR%20%22CHEMBL502135%22%20OR%20%22CHEMBL1185%22%20OR%20%22CHEMBL489411%22%20OR%20%22CHEMBL2105755%22%20OR%20%22CHEMBL1200522%22%20OR%20%22CHEMBL1908906%22%20OR%20%22CHEMBL2106324%22%20OR%20%22CHEMBL1200623%22%20OR%20%22CHEMBL139835%22%20OR%20%22CHEMBL526%22%20OR%20%22CHEMBL1389%22%20OR%20%22CHEMBL1479%22%20OR%20%22CHEMBL1200810%22%20OR%20%22CHEMBL1200694%22%20OR%20%22CHEMBL193240%22%20OR%20%22CHEMBL1200614%22%20OR%20%22CHEMBL646%22%20OR%20%22CHEMBL634%22%20OR%20%22CHEMBL108545%22%20OR%20%22CHEMBL1601669%22%20OR%20%22CHEMBL91%22%20OR%20%22CHEMBL1159650%22%20OR%20%22CHEMBL991%22%20OR%20%22CHEMBL1042%22%20OR%20%22CHEMBL1364%22%20OR%20%22CHEMBL1200908%22%20OR%20%22CHEMBL1289%22%20OR%20%22CHEMBL1200807%22%20OR%20%22CHEMBL1201287%22%20OR%20%22CHEMBL312448%22%20OR%20%22CHEMBL73234%22%20OR%20%22CHEMBL1256786%22%20OR%20%22CHEMBL811%22%20OR%20%22CHEMBL959%22%20OR%20%22CHEMBL1651990%22%20OR%20%22CHEMBL557555%22%20OR%20%22CHEMBL649%22%20OR%20%22CHEMBL2103846%22%20OR%20%22CHEMBL1533%22%20OR%20%22CHEMBL566315%22%20OR%20%22CHEMBL787%22%20OR%20%22CHEMBL3707307%22%20OR%20%22CHEMBL13376%22%20OR%20%22CHEMBL2105720%22%20OR%20%22CHEMBL1200790%22%20OR%20%22CHEMBL406%22%20OR%20%22CHEMBL1201284%22%20OR%20%22CHEMBL1237119%22%20OR%20%22CHEMBL8%22%20OR%20%22CHEMBL31%22%20OR%20%22CHEMBL1505%22%20OR%20%22CHEMBL1520%22%20OR%20%22CHEMBL802%22%20OR%20%22CHEMBL1040%22%20OR%20%22CHEMBL1200790%22%20OR%20%22CHEMBL1201284%22%20OR%20%22CHEMBL1237119%22%20OR%20%22CHEMBL8%22%20OR%20%22CHEMBL31%22%20OR%20%22CHEMBL406%22%20OR%20%22CHEMBL1505%22%20OR%20%22CHEMBL1520%22%20OR%20%22CHEMBL1619785%22%20OR%20%22CHEMBL1194666%22%20OR%20%22CHEMBL1239%22%20OR%20%22CHEMBL1593566%22%20OR%20%22CHEMBL1013%22%20OR%20%22CHEMBL1076347%22%20OR%20%22CHEMBL2107797%22%20OR%20%22CHEMBL23%22%20OR%20%22CHEMBL1363%22%20OR%20%22CHEMBL1201220%22%20OR%20%22CHEMBL1201146%22%20OR%20%22CHEMBL1536%22%20OR%20%22CHEMBL604608%22%20OR%20%22CHEMBL742%22%20OR%20%22CHEMBL395091%22%20OR%20%22CHEMBL565%22%20OR%20%22CHEMBL3707340%22%20OR%20%22CHEMBL3707265%22%20OR%20%22CHEMBL1201075%22%20OR%20%22CHEMBL1497%22%20OR%20%22CHEMBL1200455%22%20OR%20%22CHEMBL277522%22%20OR%20%22CHEMBL46286%22%20OR%20%22CHEMBL1167%22%20OR%20%22CHEMBL2079611%22%20OR%20%22CHEMBL1909288%22%20OR%20%22CHEMBL416%22%20OR%20%22CHEMBL231779%22%20OR%20%22CHEMBL1095%22%20OR%20%22CHEMBL1187833%22%20OR%20%22CHEMBL1413%22%20OR%20%22CHEMBL1201753%22%20OR%20%22CHEMBL93047%22%20OR%20%22CHEMBL1185568%22%20OR%20%22CHEMBL3707390%22%20OR%20%22CHEMBL494753%22%20OR%20%22CHEMBL345524%22%20OR%20%22CHEMBL712%22%20OR%20%22CHEMBL1697838%22%20OR%20%22CHEMBL472%22%20OR%20%22CHEMBL411%22%20OR%20%22CHEMBL932%22%20OR%20%22CHEMBL9%22%20OR%20%22CHEMBL631%22%20OR%20%22CHEMBL1454%22%20OR%20%22CHEMBL1565476%22)/state/matrix_fs_Compounds'
       expect(glados.Utils.URLS.URLNeedsShortening(testURL)).toBe(true)

       testURL = 'http://0.0.0.0:8000/g/#browse/activities/filter/molecule_chembl_id%3A(%22CHEMBL2104797%22%20OR%20%22CHEMBL2108174%22%20OR%20%22CHEMBL1187011%22%20OR%20%22CHEMBL1495%22%20OR%20%22CHEMBL2106530%22%20OR%20%22CHEMBL2104906%22%20OR%20%22CHEMBL2104688%22%20OR%20%22CHEMBL2110823%22%20OR%20%22CHEMBL49943%22%20OR%20%22CHEMBL3833351%22%20OR%20%22CHEMBL3833365%22%20OR%20%22CHEMBL3707202%22%20OR%20%22CHEMBL3707298%22%20OR%20%22CHEMBL1909079%22%20OR%20%22CHEMBL1293%22%20OR%20%22CHEMBL1201354%22%20OR%20%22CHEMBL1418176%22%20OR%20%22CHEMBL3304486%22%20OR%20%22CHEMBL428880%22%20OR%20%22CHEMBL2106880%22%20OR%20%22CHEMBL2106999%22%20OR%20%22CHEMBL2110948%22%20OR%20%22CHEMBL1201487%22%20OR%20%22CHEMBL1213353%22%20OR%20%22CHEMBL2105372%22%20OR%20%22CHEMBL1201321%22%20OR%20%22CHEMBL1201346%22%20OR%20%22CHEMBL1200736%22%20OR%20%22CHEMBL1201232%22%20OR%20%22CHEMBL3707255%22%20OR%20%22CHEMBL1201283%22%20OR%20%22CHEMBL425%22%20OR%20%22CHEMBL383634%22%20OR%20%22CHEMBL2106516%22%20OR%20%22CHEMBL2079587%22%20OR%20%22CHEMBL370143%22%20OR%20%22CHEMBL1201130%22%20OR%20%22CHEMBL2221249%22%20OR%20%22CHEMBL524004%22%20OR%20%22CHEMBL63857%22%20OR%20%22CHEMBL282121%22%20OR%20%22CHEMBL2028510%22%20OR%20%22CHEMBL1524273%22%20OR%20%22CHEMBL1433%22%20OR%20%22CHEMBL87493%22%20OR%20%22CHEMBL1123%22%20OR%20%22CHEMBL95889%22%20OR%20%22CHEMBL248702%22%20OR%20%22CHEMBL841%22%20OR%20%22CHEMBL170988%22%20OR%20%22CHEMBL448570%22%20OR%20%22CHEMBL12610%22%20OR%20%22CHEMBL1255943%22%20OR%20%22CHEMBL1200585%22%20OR%20%22CHEMBL2368925%22%20OR%20%22CHEMBL184618%22%20OR%20%22CHEMBL76370%22%20OR%20%22CHEMBL1725880%22%20OR%20%22CHEMBL1697838%22%20OR%20%22CHEMBL2106004%22%20OR%20%22CHEMBL2108848%22%20OR%20%22CHEMBL2109133%22%20OR%20%22CHEMBL2105318%22%20OR%20%22CHEMBL2104514%22%20OR%20%22CHEMBL2105813%22%20OR%20%22CHEMBL1200788%22%20OR%20%22CHEMBL2109198%22%20OR%20%22CHEMBL2107457%22%20OR%20%22CHEMBL2105061%22%20OR%20%22CHEMBL2104523%22%20OR%20%22CHEMBL3707333%22%20OR%20%22CHEMBL1200979%22%20OR%20%22CHEMBL39736%22%20OR%20%22CHEMBL986%22%20OR%20%22CHEMBL207413%22%20OR%20%22CHEMBL1201770%22%20OR%20%22CHEMBL2111286%22%20OR%20%22CHEMBL472%22%20OR%20%22CHEMBL2107841%22%20OR%20%22CHEMBL2105977%22%20OR%20%22CHEMBL2107381%22%20OR%20%22CHEMBL1200656%22%20OR%20%22CHEMBL2103758%22%20OR%20%22CHEMBL2104987%22%20OR%20%22CHEMBL1201613%22%20OR%20%22CHEMBL457299%22%20OR%20%22CHEMBL1237068%22%20OR%20%22CHEMBL1201865%22%20OR%20%22CHEMBL1096%22%20OR%20%22CHEMBL1222251%22%20OR%20%22CHEMBL237500%22%20OR%20%22CHEMBL3707235%22%20OR%20%22CHEMBL2109005%22%20OR%20%22CHEMBL196%22%20OR%20%22CHEMBL1364%22%20OR%20%22CHEMBL2108793%22%20OR%20%22CHEMBL1200968%22%20OR%20%22CHEMBL316561%22%20OR%20%22CHEMBL12208%22%20OR%20%22CHEMBL1201863%22%20OR%20%22CHEMBL427216%22%20OR%20%22CHEMBL1746%22%20OR%20%22CHEMBL2108751%22%20OR%20%22CHEMBL1615209%22%20OR%20%22CHEMBL2107914%22%20OR%20%22CHEMBL1201631%22%20OR%20%22CHEMBL1797128%22%20OR%20%22CHEMBL25%22%20OR%20%22CHEMBL1439973%22%20OR%20%22CHEMBL606%22%20OR%20%22CHEMBL408%22%20OR%20%22CHEMBL46%22%20OR%20%22CHEMBL117287%22%20OR%20%22CHEMBL1549%22%20OR%20%22CHEMBL942%22%20OR%20%22CHEMBL1742461%22%20OR%20%22CHEMBL1337%22%20OR%20%22CHEMBL2107381%22%20OR%20%22CHEMBL3707331%22%20OR%20%22CHEMBL3707335%22%20OR%20%22CHEMBL3707385%22%20OR%20%22CHEMBL3833390%22%20OR%20%22CHEMBL2103996%22%20OR%20%22CHEMBL1201780%22%20OR%20%22CHEMBL1200929%22%20OR%20%22CHEMBL229383%22%20OR%20%22CHEMBL817%22%20OR%20%22CHEMBL2105813%22%20OR%20%22CHEMBL2106004%22%20OR%20%22CHEMBL2368925%22%20OR%20%22CHEMBL472%22%20OR%20%22CHEMBL2107457%22%20OR%20%22CHEMBL2107841%22%20OR%20%22CHEMBL2111286%22%20OR%20%22CHEMBL566315%22%20OR%20%22CHEMBL12208%22%20OR%20%22CHEMBL1201863%22%20OR%20%22CHEMBL1491875%22%20OR%20%22CHEMBL1042%22%20OR%20%22CHEMBL3301675%22%20OR%20%22CHEMBL196%22%20OR%20%22CHEMBL1364%22%20OR%20%22CHEMBL2108793%22%20OR%20%22CHEMBL1200968%22%20OR%20%22CHEMBL316561%22%20OR%20%22CHEMBL2103758%22%20OR%20%22CHEMBL2104987%22%20OR%20%22CHEMBL1201613%22%20OR%20%22CHEMBL457299%22%20OR%20%22CHEMBL1237068%22%20OR%20%22CHEMBL1201865%22%20OR%20%22CHEMBL1096%22%20OR%20%22CHEMBL1222251%22%20OR%20%22CHEMBL237500%22%20OR%20%22CHEMBL3707235%22%20OR%20%22CHEMBL2109005%22%20OR%20%22CHEMBL2108452%22%20OR%20%22CHEMBL1201648%22%20OR%20%22CHEMBL1697841%22%20OR%20%22CHEMBL507419%22%20OR%20%22CHEMBL529888%22%20OR%20%22CHEMBL1623992%22%20OR%20%22CHEMBL2105114%22%20OR%20%22CHEMBL2110700%22%20OR%20%22CHEMBL2110781%22%20OR%20%22CHEMBL2110912%22%20OR%20%22CHEMBL2106997%22%20OR%20%22CHEMBL1697845%22%20OR%20%22CHEMBL404520%22%20OR%20%22CHEMBL1697739%22%20OR%20%22CHEMBL3707363%22%20OR%20%22CHEMBL1060%22%20OR%20%22CHEMBL2107574%22%20OR%20%22CHEMBL1330792%22%20OR%20%22CHEMBL1484857%22%20OR%20%22CHEMBL1402684%22%20OR%20%22CHEMBL441687%22%20OR%20%22CHEMBL1219%22%20OR%20%22CHEMBL2109228%22%20OR%20%22CHEMBL2107145%22%20OR%20%22CHEMBL46102%22%20OR%20%22CHEMBL1619528%22%20OR%20%22CHEMBL1697768%22%20OR%20%22CHEMBL1194666%22%20OR%20%22CHEMBL1200718%22%20OR%20%22CHEMBL2106618%22%20OR%20%22CHEMBL473159%22%20OR%20%22CHEMBL1261%22%20OR%20%22CHEMBL1512949%22%20OR%20%22CHEMBL1110%22%20OR%20%22CHEMBL223448%22%20OR%20%22CHEMBL114503%22%20OR%20%22CHEMBL2104594%22%20OR%20%22CHEMBL2108942%22%20OR%20%22CHEMBL1384%22%20OR%20%22CHEMBL338802%22%20OR%20%22CHEMBL1884833%22%20OR%20%22CHEMBL1905872%22%20OR%20%22CHEMBL499915%22%20OR%20%22CHEMBL80%22%20OR%20%22CHEMBL46102%22%20OR%20%22CHEMBL1619528%22%20OR%20%22CHEMBL1697768%22%20OR%20%22CHEMBL1194666%22%20OR%20%22CHEMBL2106111%22%20OR%20%22CHEMBL2106123%22%20OR%20%22CHEMBL1574%22%20OR%20%22CHEMBL2108311%22%20OR%20%22CHEMBL1964120%22%20OR%20%22CHEMBL1370%22%20OR%20%22CHEMBL3707281%22%20OR%20%22CHEMBL1187846%22%20OR%20%22CHEMBL471498%22%20OR%20%22CHEMBL1729803%22%20OR%20%22CHEMBL3707384%22%20OR%20%22CHEMBL1231821%22%20OR%20%22CHEMBL1201822%22%20OR%20%22CHEMBL2106119%22%20OR%20%22CHEMBL1088977%22%20OR%20%22CHEMBL2108446%22%20OR%20%22CHEMBL2106426%22%20OR%20%22CHEMBL2219418%22%20OR%20%22CHEMBL1201629%22%20OR%20%22CHEMBL517712%22%20OR%20%22CHEMBL1882461%22%20OR%20%22CHEMBL3833350%22%20OR%20%22CHEMBL3833377%22%20OR%20%22CHEMBL1200718%22%20OR%20%22CHEMBL3707282%22%20OR%20%22CHEMBL3707299%22%20OR%20%22CHEMBL1110%22%20OR%20%22CHEMBL2107112%22%20OR%20%22CHEMBL270190%22%20OR%20%22CHEMBL296306%22%20OR%20%22CHEMBL1908359%22%20OR%20%22CHEMBL240597%22%20OR%20%22CHEMBL1589%22%20OR%20%22CHEMBL2108027%22%20OR%20%22CHEMBL1201637%22%20OR%20%22CHEMBL1201774%22%20OR%20%22CHEMBL2107857%22%20OR%20%22CHEMBL1617%22%20OR%20%22CHEMBL399510%22%20OR%20%22CHEMBL1200668%22%20OR%20%22CHEMBL2105534%22%20OR%20%22CHEMBL1200376%22%20OR%20%22CHEMBL2107830%22%20OR%20%22CHEMBL1412041%22%20OR%20%22CHEMBL2104194%22%20OR%20%22CHEMBL1536%22%20OR%20%22CHEMBL1502%22%20OR%20%22CHEMBL1200547%22%20OR%20%22CHEMBL1419%22%20OR%20%22CHEMBL465%22%20OR%20%22CHEMBL3833363%22%20OR%20%22CHEMBL3833348%22%20OR%20%22CHEMBL930%22%20OR%20%22CHEMBL1200878%22%20OR%20%22CHEMBL1201496%22%20OR%20%22CHEMBL47%22%20OR%20%22CHEMBL131%22%20OR%20%22CHEMBL1200928%22%20OR%20%22CHEMBL325109%22%20OR%20%22CHEMBL1471%22%20OR%20%22CHEMBL2218896%22%20OR%20%22CHEMBL1200562%22%20OR%20%22CHEMBL1901349%22%20OR%20%22CHEMBL1140%22%20OR%20%22CHEMBL219916%22%20OR%20%22CHEMBL653%22%20OR%20%22CHEMBL1213251%22%20OR%20%22CHEMBL121%22%20OR%20%22CHEMBL1201134%22%20OR%20%22CHEMBL398615%22%20OR%20%22CHEMBL2108696%22%20OR%20%22CHEMBL692%22%20OR%20%22CHEMBL400599%22%20OR%20%22CHEMBL56564%22%20OR%20%22CHEMBL1201824%22%20OR%20%22CHEMBL421%22%20OR%20%22CHEMBL1200762%22%20OR%20%22CHEMBL846%22%20OR%20%22CHEMBL1201556%22%20OR%20%22CHEMBL2103772%22%20OR%20%22CHEMBL1200637%22%20OR%20%22CHEMBL389621%22%20OR%20%22CHEMBL1200384%22%20OR%20%22CHEMBL1200946%22%20OR%20%22CHEMBL205596%22%20OR%20%22CHEMBL1091%22%20OR%20%22CHEMBL1401508%22%20OR%20%22CHEMBL70%22%20OR%20%22CHEMBL783%22%20OR%20%22CHEMBL2105745%22%20OR%20%22CHEMBL1331216%22%20OR%20%22CHEMBL782%22%20OR%20%22CHEMBL1201630%22%20OR%20%22CHEMBL276443%22%20OR%20%22CHEMBL1073%22%20OR%20%22CHEMBL1790041%22%20OR%20%22CHEMBL70%22%20OR%20%22CHEMBL783%22%20OR%20%22CHEMBL2105745%22%20OR%20%22CHEMBL1331216%22%20OR%20%22CHEMBL782%22%20OR%20%22CHEMBL11978%22%20OR%20%22CHEMBL3833310%22%20OR%20%22CHEMBL3707301%22%20OR%20%22CHEMBL3707362%22%20OR%20%22CHEMBL3707234%22%20OR%20%22CHEMBL2108106%22%20OR%20%22CHEMBL1201264%22%20OR%20%22CHEMBL3138616%22%20OR%20%22CHEMBL2106049%22%20OR%20%22CHEMBL2108558%22%20OR%20%22CHEMBL2106575%22%20OR%20%22CHEMBL2103778%22%20OR%20%22CHEMBL1187724%22%20OR%20%22CHEMBL2104786%22%20OR%20%22CHEMBL2106324%22%20OR%20%22CHEMBL2105231%22%20OR%20%22CHEMBL2108265%22%20OR%20%22CHEMBL3707204%22%20OR%20%22CHEMBL1201286%22%20OR%20%22CHEMBL2108832%22%20OR%20%22CHEMBL2110788%22%20OR%20%22CHEMBL1201482%22%20OR%20%22CHEMBL2110849%22%20OR%20%22CHEMBL1618102%22%20OR%20%22CHEMBL2111176%22%20OR%20%22CHEMBL1909324%22%20OR%20%22CHEMBL372795%22%20OR%20%22CHEMBL253371%22%20OR%20%22CHEMBL1201340%22%20OR%20%22CHEMBL1200572%22%20OR%20%22CHEMBL385517%22%20OR%20%22CHEMBL1200623%22%20OR%20%22CHEMBL1201235%22%20OR%20%22CHEMBL1201294%22%20OR%20%22CHEMBL1201633%22%20OR%20%22CHEMBL2104457%22%20OR%20%22CHEMBL2107567%22%20OR%20%22CHEMBL190044%22%20OR%20%22CHEMBL2103773%22%20OR%20%22CHEMBL1201595%22%20OR%20%22CHEMBL53418%22%20OR%20%22CHEMBL178862%22%20OR%20%22CHEMBL790%22%20OR%20%22CHEMBL134342%22%20OR%20%22CHEMBL609%22%20OR%20%22CHEMBL360328%22%20OR%20%22CHEMBL1237066%22%20OR%20%22CHEMBL1682%22%20OR%20%22CHEMBL2106978%22%20OR%20%22CHEMBL19224%22%20OR%20%22CHEMBL3707302%22%20OR%20%22CHEMBL3707303%22%20OR%20%22CHEMBL3707447%22%20OR%20%22CHEMBL3707206%22%20OR%20%22CHEMBL3707233%22%20OR%20%22CHEMBL1189679%22%20OR%20%22CHEMBL86%22%20OR%20%22CHEMBL1201325%22%20OR%20%22CHEMBL253592%22%20OR%20%22CHEMBL2106975%22%20OR%20%22CHEMBL551978%22%20OR%20%22CHEMBL244888%22%20OR%20%22CHEMBL233406%22%20OR%20%22CHEMBL2107781%22%20OR%20%22CHEMBL30%22%20OR%20%22CHEMBL1200574%22%20OR%20%22CHEMBL3833315%22%20OR%20%22CHEMBL3833322%22%20OR%20%22CHEMBL1561%22%20OR%20%22CHEMBL2108085%22%20OR%20%22CHEMBL480%22%20OR%20%22CHEMBL27769%22%20OR%20%22CHEMBL3039537%22%20OR%20%22CHEMBL104%22%20OR%20%22CHEMBL1201866%22%20OR%20%22CHEMBL1566%22%20OR%20%22CHEMBL376359%22%20OR%20%22CHEMBL1497%22%20OR%20%22CHEMBL1481%22%20OR%20%22CHEMBL2159122%22%20OR%20%22CHEMBL1201538%22%20OR%20%22CHEMBL2108336%22%20OR%20%22CHEMBL1503%22%20OR%20%22CHEMBL262777%22%20OR%20%22CHEMBL635%22%20OR%20%22CHEMBL384467%22%20OR%20%22CHEMBL2107869%22%20OR%20%22CHEMBL1152%22%20OR%20%22CHEMBL2108894%22%20OR%20%22CHEMBL414357%22%20OR%20%22CHEMBL1200436%22%20OR%20%22CHEMBL1200500%22%20OR%20%22CHEMBL1201320%22%20OR%20%22CHEMBL2109152%22%20OR%20%22CHEMBL1440%22%20OR%20%22CHEMBL1200436%22%20OR%20%22CHEMBL1200500%22%20OR%20%22CHEMBL1201320%22%20OR%20%22CHEMBL2109152%22%20OR%20%22CHEMBL1561%22%20OR%20%22CHEMBL1440%22%20OR%20%22CHEMBL1434%22%20OR%20%22CHEMBL2105085%22%20OR%20%22CHEMBL498%22%20OR%20%22CHEMBL1528%22%20OR%20%22CHEMBL1200539%22%20OR%20%22CHEMBL1547%22%20OR%20%22CHEMBL1200458%22%20OR%20%22CHEMBL1200731%22%20OR%20%22CHEMBL2108888%22%20OR%20%22CHEMBL2104255%22%20OR%20%22CHEMBL1909284%22%20OR%20%22CHEMBL1200449%22%20OR%20%22CHEMBL1566956%22%20OR%20%22CHEMBL1201027%22%20OR%20%22CHEMBL602%22%20OR%20%22CHEMBL1255800%22%20OR%20%22CHEMBL1200706%22%20OR%20%22CHEMBL175247%22%20OR%20%22CHEMBL111%22%20OR%20%22CHEMBL1422%22%20OR%20%22CHEMBL1201632%22%20OR%20%22CHEMBL82202%22%20OR%20%22CHEMBL2107065%22%20OR%20%22CHEMBL1029%22%20OR%20%22CHEMBL632%22%20OR%20%22CHEMBL689%22%20OR%20%22CHEMBL1201497%22%20OR%20%22CHEMBL704%22%20OR%20%22CHEMBL2108676%22%20OR%20%22CHEMBL310555%22%20OR%20%22CHEMBL71595%22%20OR%20%22CHEMBL1200950%22%20OR%20%22CHEMBL3544909%22%20OR%20%22CHEMBL1356%22%20OR%20%22CHEMBL1200909%22%20OR%20%22CHEMBL289469%22%20OR%20%22CHEMBL90593%22)'
       expect(glados.Utils.URLS.URLNeedsShortening(testURL)).toBe(true)