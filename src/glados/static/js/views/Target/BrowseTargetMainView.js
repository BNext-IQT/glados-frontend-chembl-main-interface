// Generated by CoffeeScript 1.4.0
var BrowseTargetMainView;

BrowseTargetMainView = Backbone.View.extend({
  events: {
    'click .open-all': 'openAll',
    'click .collapse-all': 'collapseAll',
    'click .select-all': 'selectAll',
    'click .clear-selections': 'clearSelections',
    'change input[name="selectTree"]': 'selectTree',
    'click .search-in-tree': 'searchInTree',
    'click .reset-search': 'resetSearch'
  },
  initialize: function() {
    this.listView = TargetBrowserApp.initBrowserAsList(this.model, $('#BCK-TargetBrowserAsList'));
    return this.circlesView = TargetBrowserApp.initBrowserAsCircles(this.model, $('#BCK-TargetBrowserAsCircles'));
  },
  openAll: function() {
    return this.listView.expandAll();
  },
  collapseAll: function() {
    return this.listView.collapseAll();
  },
  selectAll: function() {
    return this.listView.selectAll();
  },
  clearSelections: function() {
    return this.listView.clearSelections();
  },
  selectTree: function() {
    var btnCheckedID, url;
    btnCheckedID = $(this.el).find('input[name="selectTree"]:checked').attr('id');
    url = (function() {
      switch (btnCheckedID) {
        case 'radio-proteinTargetTree':
          return this.model.url = 'static/data/protein_target_tree.json';
        case 'radio-taxonomyTree':
          return this.model.url = 'static/data/taxonomy_target_tree.json';
        case 'radio-geneOntologyTree':
          return this.model.url = 'static/data/gene_ontology_tree.json';
      }
    }).call(this);
    this.listView.showPaginatedViewPreloader();
    this.circlesView.showPaginatedViewPreloader();
    return this.model.fetch();
  },
  searchInTree: function() {
    var numFound, searchTerms, search_summary;
    searchTerms = $(this.el).find('#search_terms').val();
    search_summary = $(this.el).find('#search_in_tree_summary');
    search_summary.show();
    if (searchTerms.length < 2) {
      search_summary.html('You must enter at least 2 characters');
      return;
    }
    numFound = this.model.searchInTree(searchTerms);
    return search_summary.html(Handlebars.compile($('#Handlebars-TargetBrowser-searchResults').html())({
      num_results: numFound
    }));
  },
  resetSearch: function() {
    var search_summary;
    search_summary = $(this.el).find('#search_in_tree_summary');
    search_summary.hide();
    return this.model.resetSearch();
  }
});
