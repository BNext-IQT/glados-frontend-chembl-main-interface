// Generated by CoffeeScript 1.4.0
var DownloadModelExt;

DownloadModelExt = {
  getBlobToDownload: function(contentStr) {
    return new Blob([contentStr], {
      type: 'text/plain;charset=utf-8'
    });
  },
  getCSVHeaderString: function() {
    var key, keys, value, _ref;
    keys = [];
    _ref = this.attributes;
    for (key in _ref) {
      value = _ref[key];
      keys.push(key);
    }
    return keys.join(';');
  },
  getCSVContentString: function() {
    var key, value, values, _ref;
    values = [];
    _ref = this.attributes;
    for (key in _ref) {
      value = _ref[key];
      values.push(JSON.stringify(this.attributes[key]));
    }
    return values.join(';');
  },
  getFullCSVString: function() {
    var content, header;
    header = this.getCSVHeaderString();
    content = this.getCSVContentString();
    return header + '\n' + content;
  },
  downloadCSV: function(filename) {
    var blob;
    blob = this.getBlobToDownload(this.getFullCSVString());
    return saveAs(blob, filename);
  },
  getJSONString: function() {
    return JSON.stringify(this.toJSON());
  },
  downloadJSON: function(filename) {
    var blob;
    blob = this.getBlobToDownload(this.getJSONString());
    return saveAs(blob, filename);
  }
};
