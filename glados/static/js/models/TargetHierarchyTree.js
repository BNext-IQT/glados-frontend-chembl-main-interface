// Generated by CoffeeScript 1.4.0
var TargetHierarchyTree;

TargetHierarchyTree = Backbone.Model.extend({
  initialize: function() {
    return this.on('change', this.initHierarhy, this);
  },
  initHierarhy: function() {
    var addOneNode, children_col, node, _i, _len, _ref, _results;
    children_col = new TargetHierarchyChildren;
    addOneNode = function(node_obj, children_col, parent_id) {
      var child_obj, grand_children_coll, node, _i, _len, _ref, _results;
      grand_children_coll = new TargetHierarchyChildren;
      node = new TargetHierarchyNode({
        name: node_obj.name,
        id: node_obj.id,
        parent_id: parent_id,
        children: grand_children_coll,
        size: node_obj.size
      });
      children_col.add(node);
      if (node_obj.children != null) {
        _ref = node_obj.children;
        _results = [];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          child_obj = _ref[_i];
          _results.push(addOneNode(child_obj, grand_children_coll, node_obj.id));
        }
        return _results;
      }
    };
    _ref = this.get('children');
    _results = [];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      node = _ref[_i];
      _results.push(addOneNode(node, children_col, void 0));
    }
    return _results;
  }
});
