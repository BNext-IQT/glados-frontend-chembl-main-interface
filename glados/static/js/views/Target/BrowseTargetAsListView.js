// Generated by CoffeeScript 1.4.0
var BrowseTargetAsListView;

BrowseTargetAsListView = Backbone.View.extend({
  initialize: function() {
    return this.model.on('change', this.render, this);
  },
  render: function() {
    var addOneNode, lvl_1_nodes, node, table, _i, _len;
    lvl_1_nodes = this.model.get('children');
    table = $(this.el).find('.tree');
    addOneNode = function(curr_node, table, parent_id) {
      var child, new_row, _i, _len, _ref, _results;
      new_row = Handlebars.compile($('#Handlebars-TargetBrowser-AsList-item').html())({
        id: curr_node.id,
        name: curr_node.name,
        size: curr_node.size,
        parent_id: parent_id
      });
      table.append(new_row);
      if (curr_node.children != null) {
        _ref = curr_node.children;
        _results = [];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          child = _ref[_i];
          _results.push(addOneNode(child, table, curr_node.id));
        }
        return _results;
      }
    };
    for (_i = 0, _len = lvl_1_nodes.length; _i < _len; _i++) {
      node = lvl_1_nodes[_i];
      addOneNode(node, table, void 0);
    }
    table.treegrid();
    return table.treegrid('collapseAll');
  }
});
