// Generated by CoffeeScript 1.4.0
var TargetComponentsView;

TargetComponentsView = CardView.extend(DownloadViewExt).extend({
  initialize: function() {
    this.model.on('change', this.render, this);
    this.model.on('error', this.showCompoundErrorCard, this);
    return this.resource_type = 'Target';
  },
  render: function() {
    if (this.model.get('target_components').length === 0) {
      $('#TargetComponents').hide();
      $('#TargetComponents').next().hide();
      $(this.el).hide();
      return;
    }
    this.fill_template('BCK-Components-large');
    this.fill_template('BCK-Components-small');
    this.showVisibleContent();
    this.initEmbedModal('components');
    return this.activateModals();
  },
  fill_template: function(div_id) {
    var div, template;
    div = $(this.el).find('#' + div_id);
    template = $('#' + div.attr('data-hb-template'));
    return div.html(Handlebars.compile(template.html())({
      component_description: this.model.get('component_description'),
      relationship: this.model.get('relationship'),
      components: this.model.get('target_components')
    }));
  },
  getFilename: function(format) {
    if (format === 'csv') {
      return 'TargetComponents.csv';
    } else if (format === 'json') {
      return 'TargetComponents.json';
    } else if (format === 'xlsx') {
      return 'TargetComponents.xlsx';
    } else {
      return 'file.txt';
    }
  }
});
