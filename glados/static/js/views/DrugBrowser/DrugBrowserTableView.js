// Generated by CoffeeScript 1.4.0
var DrugBrowserTableView;

DrugBrowserTableView = Backbone.View.extend(PaginatedViewExt).extend({
  initialize: function() {
    return this.collection.on('reset do-repaint sort', this.render, this);
  },
  render: function() {
    console.log('render!');
    this.clearTable();
    return this.fill_template('DBTable-large');
  },
  fill_template: function(elem_id) {
    var drug, elem, header_row_cont, header_template, new_row_cont, template, _i, _len, _ref, _results;
    elem = $(this.el).find('#' + elem_id);
    template = $('#' + elem.attr('data-hb-template'));
    if (elem.is('table')) {
      header_template = $('#' + elem.attr('data-hb-template-2'));
      header_row_cont = Handlebars.compile(header_template.html())({
        columns: this.collection.getMeta('columns')
      });
      elem.append($(header_row_cont));
    }
    console.log(this.collection);
    _ref = this.collection.getCurrentPage();
    _results = [];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      drug = _ref[_i];
      new_row_cont = Handlebars.compile(template.html())({
        molecule_chembl_id: drug.get('molecule_chembl_id'),
        molecule_type: drug.get('molecule_type'),
        pref_name: drug.get('pref_name'),
        max_phase: drug.get('max_phase')
      });
      elem.append($(new_row_cont));
      _results.push(console.log('add row!'));
    }
    return _results;
  },
  clearTable: function() {
    return $('#DBTable-large').empty();
  }
});
