sudo: required
dist: xenial
env:
  matrix:
  - MOZ_HEADLESS=1
addons:
  firefox: latest
  apt:
    packages:
    - bsdtar
    - gettext
  chrome: stable
language: python
python:
- '3.5'
before_install:
- wget https://github.com/mozilla/geckodriver/releases/download/v0.24.0/geckodriver-v0.24.0-linux64.tar.gz
- mkdir geckodriver
- tar -xzf geckodriver-v0.24.0-linux64.tar.gz -C geckodriver
- export PATH=$PATH:$PWD/geckodriver
install:
- pip install -r requirements.txt
- python setup.py install
before_script:
- mkdir -p $HOME/.chembl-glados
- cp configurations/default_travis_config.yml $HOME/.chembl-glados/config.yml
- "./manage_glados_no_install.sh makemigrations"
- "./manage_glados_no_install.sh migrate"
- "./manage_glados_no_install.sh compilemessages"
- "./manage_glados_no_install.sh runserver 8000  2>&1 | grep -v 200 | grep -v 304
  &"
- sleep 60
script:
- "./run_tests_no_install.sh"
env:global:
- secure: BClAPD9oDqqwj4jn8bL9fxDYp/VPMrUGr8N5Z0aEq0Dv1t7RXGNpCDd5eMejptaMuuC68S2HLva2V1u7kLxcd6P3ab+UCQ4WFQtdxgOIJVe4rFSD0M6oCWgYAWxz8SQfChLcutWxji9OWEzbsrIX8uwERQfn3cxEIcZqbhqd+rmxtu2wwCwotjEqthDUIjObz9jFYWFqyTHz1SsdLIVSL6sOeAP+WMaomsH/c8MV/p0ZCvXzlwQ2pt1m+AQarlPEnoNwxE5i2H+pKOzVeSsSk58Dwxgb//JyElfsBIPv+NnIX0r+Vv/2EwOVuKGOShFJ877b5VBHif3P6F3w9AvfWBSCqR6CU548PE4MOK5aKub6jAjzWF6ngzCUYKDcOrBZrOr6QXH8O6ayAPh+H6U8F+H1y2kqEBvJ/3dCfcFqTYsJPdVQndDKo8X+Qqix7/HZXfbSBFB9Grq7bvIl4kTcPQj0MMzSxs0h8fatXk2eB+/q0b9yobEiL7pYrQiiquCWPqZ9W4ctraEve6ib4L7jVfIgwf6luJ6Jx0HEyUOsZTXFpp+cjuXKnF9yT4I02v4cbSVXXs0URGBl6OGfJCxgLY6sY90lTml36re0l2RAazT4VP8YPqqH3URHLD1ntTxxSRA3fXGXFvKhk8oAL0GuDhJ91DK4xn/JARzv7MQJkUI=
- secure: bwBNQ+rantzs/hvJubVu6VU2uMF8I+CYobadH20gmMYZlRvoLMDC3s0i+x/qXiLaIpsxyDAgVErZ06xYxUdoy6c8JZv8z+4tsgeWlPTGCDilhTb2etXmSwJ/+r/0vS1sAstqXPsTYmXGKAAvjhrUwhaMJTwprJs0oxYUuH9G992Xp7RJaL7CWTZMkwnVYbFWzg9UwNnsGdnuv9B9h8xf/VpnKrPeDqRsTLd3dQ22CAeiqBmHjAzYo2wyyA6K90eQuooSX+JqW0JZE+6lq+rrfGGmVoJUSy7sFsBJ4A6Qfzdi7xYmZdIY68p2/62/JmJGa7Xx7LNne0Lk8X5Hr1Bi9nruSZJudr66bXG7yOcJT7RnZv6/YxvgyDTWzASBsGdrLzWrPK5wY4GzSJgagkn+ywHNPr9saFi87Orez57iOQ31LorWtUFs44A+uwoUN+zIoAuBNLRLnDxutCqpuTKzNxAHTUDRSE8WMJNntVYGhzZ3ABVyacSaPyWFhhDMc3prULpHYJakxcoJJzxLcACuFpDSrt5o7NtJwXKK+elF9mV9vtTtTd9bJ4h1ZfF0P/Q04VRaXBLLftGH33uPWfwjBscbRaBvpVqx1z256XqmmeF1Q1abQKqE5ARFt5hg1a3hARB3HxfNmx6H1kcB34G+ulag3ONfuP1bc3IPK9LkCX0=
